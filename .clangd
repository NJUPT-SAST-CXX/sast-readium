# clangd configuration for SAST Readium
# Updated to use compile_commands.json copied to project root
# This file is automatically maintained by the CMake build system

CompileFlags:
  Add:
    - -std=c++20
    - -Wall
    - -Wextra
  Remove:
    - -W*
    - -fcoroutines-ts
    # Remove C++20 modules flags that clangd doesn't recognize
    # These are automatically added by CMake 3.28+ but cause clangd warnings
    - -fmodules-ts
    - -fmodule-mapper=*
    - -fdeps-format=*

CompilationDatabase: .

Index:
  Background: Build
  StandardLibrary: Yes

InlayHints:
  Enabled: Yes
  ParameterNames: Yes
  DeducedTypes: Yes

Hover:
  ShowAKA: Yes

Diagnostics:
  ClangTidy:
    Add:
      - readability-*
      - modernize-*
      - performance-*
    Remove:
      - readability-magic-numbers
      - modernize-use-trailing-return-type

# Automatic compile_commands.json copying enabled
# Updated: 09/24/2025 - Now uses root directory compile database
# Updated: 09/24/2025 - Added C++20 modules flag removal for clangd compatibility
#
# Note: CMake 3.28+ automatically adds C++20 modules flags (-fmodules-ts, -fmodule-mapper, -fdeps-format)
# when C++20 standard is enabled. These flags are used by the actual compiler for dependency scanning
# and module mapping, but clangd doesn't recognize them and shows warnings. Removing these flags
# from clangd's view doesn't affect the actual build process, only the language server operation.
# clangd has its own internal C++20 modules support that doesn't rely on these compiler-specific flags.
